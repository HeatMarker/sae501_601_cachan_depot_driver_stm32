\doxysection{driver\+\_\+ins.\+c}
\hypertarget{driver__ins_8c_source}{}\label{driver__ins_8c_source}\index{Core/Src/driver\_ins.c@{Core/Src/driver\_ins.c}}
\mbox{\hyperlink{driver__ins_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00008}00008\ \textcolor{preprocessor}{\#include\ "{}stm32g0xx\_hal.h"{}}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00009}00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{driver__ins_8h}{driver\_ins.h}}"{}}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00010}00010\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00011}00011\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00014}00014\ \textcolor{keyword}{static}\ \textcolor{keyword}{struct\ }bmi08\_dev\ bmi088\_dev;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00017}00017\ \textcolor{keyword}{static}\ SPI\_HandleTypeDef\ *bmi088\_hspi;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00020}00020\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structbmi088__cs__t}{bmi088\_cs\_t}}\ cs\_accel\ =\ \{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00021}00021\ \ \ \ \ .\mbox{\hyperlink{structbmi088__cs__t_a82241972e0292c7de95ea1e293e11be3}{port}}\ =\ \mbox{\hyperlink{driver__ins_8h_a53e2fc5d653edc54b6db4e99409e4444}{BMI088\_CS\_ACC\_GPIO\_Port}},}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00022}00022\ \ \ \ \ .pin\ \ =\ \mbox{\hyperlink{driver__ins_8h_ae43b8d6738be9a0dab7689a102428b60}{BMI088\_CS\_ACC\_Pin}}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00023}00023\ \};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00026}00026\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structbmi088__cs__t}{bmi088\_cs\_t}}\ cs\_gyro\ =\ \{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00027}00027\ \ \ \ \ .\mbox{\hyperlink{structbmi088__cs__t_a82241972e0292c7de95ea1e293e11be3}{port}}\ =\ \mbox{\hyperlink{driver__ins_8h_a52ce7d0fc9ce6b80388bb0a7c73294a8}{BMI088\_CS\_GYRO\_GPIO\_Port}},}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00028}00028\ \ \ \ \ .pin\ \ =\ \mbox{\hyperlink{driver__ins_8h_ae16db209302613b5d9c5dde20e599726}{BMI088\_CS\_GYRO\_Pin}}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00029}00029\ \};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00041}00041\ \textcolor{keyword}{static}\ int8\_t\ bmi088\_spi\_read(uint8\_t\ reg\_addr,\ uint8\_t\ *reg\_data,\ uint32\_t\ len,\ \textcolor{keywordtype}{void}\ *intf\_ptr)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00042}00042\ \ \ \ \ \textcolor{keywordflow}{if}\ (reg\_data\ ==\ NULL\ ||\ intf\_ptr\ ==\ NULL)\ \textcolor{keywordflow}{return}\ BMI08\_E\_NULL\_PTR;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00043}00043\ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ ==\ 0\ ||\ len\ >\ BMI08\_MAX\_LEN)\ \textcolor{keywordflow}{return}\ BMI08\_E\_RD\_WR\_LENGTH\_INVALID;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00045}00045\ \ \ \ \ \mbox{\hyperlink{structbmi088__cs__t}{bmi088\_cs\_t}}\ *cs\ =\ (\mbox{\hyperlink{structbmi088__cs__t}{bmi088\_cs\_t}}*)intf\_ptr;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00046}00046\ \ \ \ \ HAL\_StatusTypeDef\ status;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00048}00048\ \ \ \ \ HAL\_GPIO\_WritePin(cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a82241972e0292c7de95ea1e293e11be3}{port}},\ cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a4144813adfa4dfe7e7cbeea17d1b06eb}{pin}},\ GPIO\_PIN\_RESET);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00050}00050\ \ \ \ \ \textcolor{keywordflow}{if}(cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a4144813adfa4dfe7e7cbeea17d1b06eb}{pin}}\ ==\ \mbox{\hyperlink{driver__ins_8h_ae43b8d6738be9a0dab7689a102428b60}{BMI088\_CS\_ACC\_Pin}})\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00051}00051\ \ \ \ \ \ \ \ \ uint8\_t\ tx\_buf[256]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00052}00052\ \ \ \ \ \ \ \ \ uint8\_t\ rx\_buf[256]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00054}00054\ \ \ \ \ \ \ \ \ tx\_buf[0]\ =\ reg\_addr\ |\ 0x80;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00055}00055\ \ \ \ \ \ \ \ \ tx\_buf[1]\ =\ 0x00;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00057}00057\ \ \ \ \ \ \ \ \ status\ =\ HAL\_SPI\_TransmitReceive(bmi088\_hspi,\ tx\_buf,\ rx\_buf,\ len\ +\ 2,\ HAL\_MAX\_DELAY);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00059}00059\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00060}00060\ \textcolor{comment}{\ \ \ \ \ \ \ \ for(uint32\_t\ i\ =\ 0;\ i\ <\ len\ +\ 2;\ i++)\{}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00061}00061\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ printf("{}REG\ RX\ i\ :\ \%d\ :\ \%02X\(\backslash\)r\(\backslash\)n"{},\ i,\ rx\_buf[i]);}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00062}00062\ \textcolor{comment}{\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00063}00063\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00065}00065\ \ \ \ \ \ \ \ \ HAL\_GPIO\_WritePin(cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a82241972e0292c7de95ea1e293e11be3}{port}},\ cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a4144813adfa4dfe7e7cbeea17d1b06eb}{pin}},\ GPIO\_PIN\_SET);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00067}00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(status\ !=\ HAL\_OK)\ \textcolor{keywordflow}{return}\ BMI08\_E\_COM\_FAIL;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00069}00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(uint32\_t\ i\ =\ 0;\ i\ <\ len;\ i++)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ reg\_data[i]\ =\ rx\_buf[i\ +\ 1];}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00071}00071\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00072}00072\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00073}00073\ \ \ \ \ \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00074}00074\ \ \ \ \ \ \ \ \ uint8\_t\ tx\_buf[256]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00075}00075\ \ \ \ \ \ \ \ \ uint8\_t\ rx\_buf[256]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00077}00077\ \ \ \ \ \ \ \ \ tx\_buf[0]\ =\ reg\_addr\ |\ 0x80;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00078}00078\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00079}00079\ \ \ \ \ \ \ \ \ status\ =\ HAL\_SPI\_TransmitReceive(bmi088\_hspi,\ tx\_buf,\ rx\_buf,\ len\ +\ 1,\ HAL\_MAX\_DELAY);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00081}00081\ \ \ \ \ \ \ \ \ HAL\_GPIO\_WritePin(cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a82241972e0292c7de95ea1e293e11be3}{port}},\ cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a4144813adfa4dfe7e7cbeea17d1b06eb}{pin}},\ GPIO\_PIN\_SET);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00083}00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(status\ !=\ HAL\_OK)\ \textcolor{keywordflow}{return}\ BMI08\_E\_COM\_FAIL;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00085}00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(uint32\_t\ i\ =\ 0;\ i\ <\ len;\ i++)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ reg\_data[i]\ =\ rx\_buf[i\ +\ 1];}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00087}00087\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00088}00088\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00090}00090\ \ \ \ \ \textcolor{keywordflow}{return}\ BMI08\_OK;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00091}00091\ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00101}00101\ \textcolor{keyword}{static}\ int8\_t\ bmi088\_spi\_write(uint8\_t\ reg\_addr,\ \textcolor{keyword}{const}\ uint8\_t\ *reg\_data,\ uint32\_t\ len,\ \textcolor{keywordtype}{void}\ *intf\_ptr)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00102}00102\ \ \ \ \ \mbox{\hyperlink{structbmi088__cs__t}{bmi088\_cs\_t}}\ *cs\ =\ (\mbox{\hyperlink{structbmi088__cs__t}{bmi088\_cs\_t}}*)intf\_ptr;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00103}00103\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00104}00104\ \ \ \ \ HAL\_GPIO\_WritePin(cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a82241972e0292c7de95ea1e293e11be3}{port}},\ cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a4144813adfa4dfe7e7cbeea17d1b06eb}{pin}},\ GPIO\_PIN\_RESET);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00106}00106\ \ \ \ \ uint8\_t\ addr\ =\ reg\_addr\ \&\ 0x7F;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00107}00107\ \ \ \ \ HAL\_SPI\_Transmit(bmi088\_hspi,\ \&addr,\ 1,\ HAL\_MAX\_DELAY);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00109}00109\ \ \ \ \ HAL\_SPI\_Transmit(bmi088\_hspi,\ (uint8\_t*)reg\_data,\ len,\ HAL\_MAX\_DELAY);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00111}00111\ \ \ \ \ HAL\_GPIO\_WritePin(cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a82241972e0292c7de95ea1e293e11be3}{port}},\ cs-\/>\mbox{\hyperlink{structbmi088__cs__t_a4144813adfa4dfe7e7cbeea17d1b06eb}{pin}},\ GPIO\_PIN\_SET);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00112}00112\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00113}00113\ \ \ \ \ \textcolor{keywordflow}{return}\ BMI08\_OK;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00114}00114\ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00122}00122\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ bmi088\_delay\_us(uint32\_t\ period,\ \textcolor{keywordtype}{void}\ *intf\_ptr)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00123}00123\ \ \ \ \ uint32\_t\ delay\_ms\ =\ period\ /\ 1000;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00124}00124\ \ \ \ \ \textcolor{keywordflow}{if}(delay\_ms\ ==\ 0)\ delay\_ms\ =\ 1;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00125}00125\ \ \ \ \ HAL\_Delay(delay\_ms);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00126}00126\ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00127}00127\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00133}\mbox{\hyperlink{driver__ins_8h_ac120109421a58b1dfe4cb1b2a0eef2a7}{00133}}\ int8\_t\ \mbox{\hyperlink{driver__ins_8c_ac120109421a58b1dfe4cb1b2a0eef2a7}{BMI088\_Init}}(SPI\_HandleTypeDef\ *hspi)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00134}00134\ \ \ \ \ \textcolor{keywordflow}{if}(hspi\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00135}00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ BMI08\_E\_NULL\_PTR;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00136}00136\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00138}00138\ \ \ \ \ bmi088\_hspi\ =\ hspi;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00139}00139\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00140}00140\ \ \ \ \ HAL\_GPIO\_WritePin(\mbox{\hyperlink{driver__ins_8h_a53e2fc5d653edc54b6db4e99409e4444}{BMI088\_CS\_ACC\_GPIO\_Port}},\ \mbox{\hyperlink{driver__ins_8h_ae43b8d6738be9a0dab7689a102428b60}{BMI088\_CS\_ACC\_Pin}},\ GPIO\_PIN\_SET);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00141}00141\ \ \ \ \ HAL\_GPIO\_WritePin(\mbox{\hyperlink{driver__ins_8h_a52ce7d0fc9ce6b80388bb0a7c73294a8}{BMI088\_CS\_GYRO\_GPIO\_Port}},\ \mbox{\hyperlink{driver__ins_8h_ae16db209302613b5d9c5dde20e599726}{BMI088\_CS\_GYRO\_Pin}},\ GPIO\_PIN\_SET);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00143}00143\ \ \ \ \ bmi088\_dev.intf\ =\ BMI08\_SPI\_INTF;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00144}00144\ \ \ \ \ bmi088\_dev.read\ =\ bmi088\_spi\_read;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00145}00145\ \ \ \ \ bmi088\_dev.write\ =\ bmi088\_spi\_write;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00146}00146\ \ \ \ \ bmi088\_dev.delay\_us\ =\ bmi088\_delay\_us;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00147}00147\ \ \ \ \ bmi088\_dev.intf\_ptr\_accel\ =\ \&cs\_accel;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00148}00148\ \ \ \ \ bmi088\_dev.intf\_ptr\_gyro\ =\ \&cs\_gyro;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00150}00150\ \ \ \ \ int8\_t\ rslt\_accel\ =\ bmi08a\_init(\&bmi088\_dev);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00151}00151\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00152}00152\ \textcolor{preprocessor}{\#ifdef\ DEBUG}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00153}00153\ \ \ \ \ \textcolor{comment}{//printf("{}BMI088\ Init\ Accel:\ \%d\ (0=OK)\(\backslash\)r\(\backslash\)n"{},\ rslt\_accel);}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00154}00154\ \ \ \ \ \textcolor{comment}{//printf("{}Accel\ Chip\ ID:\ 0x\%02X\ (attendu:\ 0x1E)\(\backslash\)r\(\backslash\)n"{},\ bmi088\_dev.accel\_chip\_id);}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00155}00155\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00156}00156\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00157}00157\ \ \ \ \ int8\_t\ rslt\_gyro\ =\ bmi08g\_init(\&bmi088\_dev);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00158}00158\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00159}00159\ \textcolor{preprocessor}{\#ifdef\ DEBUG}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00160}00160\ \ \ \ \ \textcolor{comment}{//printf("{}BMI088\ Init\ Gyro:\ \%d\ (0=OK)\(\backslash\)r\(\backslash\)n"{},\ rslt\_gyro);}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00161}00161\ \ \ \ \ \textcolor{comment}{//printf("{}Gyro\ Chip\ ID:\ 0x\%02X\ (attendu:\ 0x0F)\(\backslash\)r\(\backslash\)n"{},\ bmi088\_dev.gyro\_chip\_id);}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00162}00162\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00163}00163\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00164}00164\ \ \ \ \ \textcolor{keywordflow}{if}(rslt\_accel\ !=\ BMI08\_OK\ ||\ rslt\_gyro\ !=\ BMI08\_OK)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00165}00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ BMI08\_E\_DEV\_NOT\_FOUND;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00166}00166\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00167}00167\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00168}00168\ \ \ \ \ bmi088\_dev.accel\_cfg.odr\ \ \ =\ BMI08\_ACCEL\_ODR\_100\_HZ;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00169}00169\ \ \ \ \ bmi088\_dev.accel\_cfg.range\ =\ BMI088\_ACCEL\_RANGE\_6G;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00170}00170\ \ \ \ \ bmi088\_dev.accel\_cfg.bw\ \ \ \ =\ BMI08\_ACCEL\_BW\_NORMAL;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00171}00171\ \ \ \ \ bmi088\_dev.accel\_cfg.power\ =\ BMI08\_ACCEL\_PM\_ACTIVE;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00172}00172\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00173}00173\ \ \ \ \ rslt\_accel\ \ =\ bmi08a\_set\_power\_mode(\&bmi088\_dev);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00174}00174\ \ \ \ \ rslt\_accel\ |=\ bmi08a\_set\_meas\_conf(\&bmi088\_dev);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00175}00175\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00176}00176\ \ \ \ \ bmi088\_dev.gyro\_cfg.odr\ \ \ =\ BMI08\_GYRO\_BW\_23\_ODR\_200\_HZ;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00177}00177\ \ \ \ \ bmi088\_dev.gyro\_cfg.range\ =\ BMI08\_GYRO\_RANGE\_1000\_DPS;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00178}00178\ \ \ \ \ bmi088\_dev.gyro\_cfg.bw\ \ \ \ =\ BMI08\_GYRO\_BW\_23\_ODR\_200\_HZ;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00179}00179\ \ \ \ \ bmi088\_dev.gyro\_cfg.power\ =\ BMI08\_GYRO\_PM\_NORMAL;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00180}00180\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00181}00181\ \ \ \ \ rslt\_gyro\ \ =\ bmi08g\_set\_power\_mode(\&bmi088\_dev);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00182}00182\ \ \ \ \ rslt\_gyro\ |=\ bmi08g\_set\_meas\_conf(\&bmi088\_dev);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00183}00183\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00184}00184\ \ \ \ \ \textcolor{keywordflow}{if}(rslt\_accel\ !=\ BMI08\_OK\ ||\ rslt\_gyro\ !=\ BMI08\_OK)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00185}00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ BMI08\_E\_COM\_FAIL;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00186}00186\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00187}00187\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00188}00188\ \textcolor{preprocessor}{\#ifdef\ DEBUG}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00189}00189\ \ \ \ \ \textcolor{comment}{//printf("{}BMI088\ initialisé\ avec\ succès!\(\backslash\)r\(\backslash\)n"{});}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00190}00190\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00191}00191\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00192}00192\ \ \ \ \ \textcolor{keywordflow}{return}\ BMI08\_OK;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00193}00193\ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00200}\mbox{\hyperlink{driver__ins_8h_a6ec6095cf6be17614cb3023f5acbd2f7}{00200}}\ int8\_t\ \mbox{\hyperlink{driver__ins_8c_a6ec6095cf6be17614cb3023f5acbd2f7}{BMI088\_Read\_Accel\_Raw}}(\textcolor{keyword}{struct}\ bmi08\_sensor\_data\ *accel\_data)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00201}00201\ \ \ \ \ \textcolor{keywordflow}{if}(accel\_data\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00202}00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ BMI08\_E\_NULL\_PTR;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00203}00203\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00204}00204\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00205}00205\ \ \ \ \ \textcolor{keywordflow}{return}\ bmi08a\_get\_data(accel\_data,\ \&bmi088\_dev);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00206}00206\ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00207}00207\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00213}\mbox{\hyperlink{driver__ins_8h_a5426db0df3eafce551517bb8d3402332}{00213}}\ int8\_t\ \mbox{\hyperlink{driver__ins_8c_a5426db0df3eafce551517bb8d3402332}{BMI088\_Read\_Gyro\_Raw}}(\textcolor{keyword}{struct}\ bmi08\_sensor\_data\ *gyro\_data)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00214}00214\ \ \ \ \ \textcolor{keywordflow}{if}(gyro\_data\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00215}00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ BMI08\_E\_NULL\_PTR;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00216}00216\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00217}00217\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00218}00218\ \ \ \ \ \textcolor{keywordflow}{return}\ bmi08g\_get\_data(gyro\_data,\ \&bmi088\_dev);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00219}00219\ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00220}00220\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00226}\mbox{\hyperlink{driver__ins_8h_ad74d633331d9bfbf45a7961a39b3fae0}{00226}}\ int8\_t\ \mbox{\hyperlink{driver__ins_8c_ad74d633331d9bfbf45a7961a39b3fae0}{BMI088\_Read\_All}}(\mbox{\hyperlink{structbmi088__data__t}{bmi088\_data\_t}}\ *data)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00227}00227\ \ \ \ \ \textcolor{keywordflow}{if}(data\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00228}00228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ BMI08\_E\_NULL\_PTR;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00229}00229\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00230}00230\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00231}00231\ \ \ \ \ \textcolor{keyword}{struct\ }bmi08\_sensor\_data\ accel\_raw,\ gyro\_raw;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00232}00232\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00233}00233\ \ \ \ \ int8\_t\ rslt\ =\ \mbox{\hyperlink{driver__ins_8c_a6ec6095cf6be17614cb3023f5acbd2f7}{BMI088\_Read\_Accel\_Raw}}(\&accel\_raw);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00234}00234\ \ \ \ \ \textcolor{keywordflow}{if}(rslt\ !=\ BMI08\_OK)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00235}00235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rslt;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00236}00236\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00237}00237\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00238}00238\ \ \ \ \ rslt\ =\ \mbox{\hyperlink{driver__ins_8c_a5426db0df3eafce551517bb8d3402332}{BMI088\_Read\_Gyro\_Raw}}(\&gyro\_raw);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00239}00239\ \ \ \ \ \textcolor{keywordflow}{if}(rslt\ !=\ BMI08\_OK)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00240}00240\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rslt;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00241}00241\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00242}00242\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00243}00243\ \ \ \ \ data-\/>\mbox{\hyperlink{structbmi088__data__t_a571393a5df47a89b49a320c41e3295fd}{accel\_x\_mms2}}\ =\ ((float)accel\_raw.x\ /\ \mbox{\hyperlink{driver__ins_8h_a9380dda0a2ba4ec70058646c702ac9c4}{ACCEL\_RANGE\_6G\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a9e9c36ec5664be87c119e643c6588e3d}{G\_TO\_MM\_S2}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00244}00244\ \ \ \ \ data-\/>\mbox{\hyperlink{structbmi088__data__t_a25ea10feef09939d996b34fc7c3b747c}{accel\_y\_mms2}}\ =\ ((float)accel\_raw.y\ /\ \mbox{\hyperlink{driver__ins_8h_a9380dda0a2ba4ec70058646c702ac9c4}{ACCEL\_RANGE\_6G\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a9e9c36ec5664be87c119e643c6588e3d}{G\_TO\_MM\_S2}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00245}00245\ \ \ \ \ data-\/>\mbox{\hyperlink{structbmi088__data__t_a062ae56b6bf02a0ad057eda4d951fa03}{accel\_z\_mms2}}\ =\ ((float)accel\_raw.z\ /\ \mbox{\hyperlink{driver__ins_8h_a9380dda0a2ba4ec70058646c702ac9c4}{ACCEL\_RANGE\_6G\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a9e9c36ec5664be87c119e643c6588e3d}{G\_TO\_MM\_S2}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00246}00246\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00247}00247\ \ \ \ \ data-\/>\mbox{\hyperlink{structbmi088__data__t_a35be05b56d880bf99a1be2e6181be416}{gyro\_x\_rads}}\ =\ ((float)gyro\_raw.x\ /\ \mbox{\hyperlink{driver__ins_8h_a457f7161504ee5da1756fd90856d8e06}{GYRO\_RANGE\_1000DPS\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a212460e743fecb084d717bb2180c5a56}{DEG\_TO\_RAD}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00248}00248\ \ \ \ \ data-\/>\mbox{\hyperlink{structbmi088__data__t_ad002fea5f42851b31401418b126d6ead}{gyro\_y\_rads}}\ =\ ((float)gyro\_raw.y\ /\ \mbox{\hyperlink{driver__ins_8h_a457f7161504ee5da1756fd90856d8e06}{GYRO\_RANGE\_1000DPS\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a212460e743fecb084d717bb2180c5a56}{DEG\_TO\_RAD}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00249}00249\ \ \ \ \ data-\/>\mbox{\hyperlink{structbmi088__data__t_a551c8b382a72b05b257da17fd0db0731}{gyro\_z\_rads}}\ =\ ((float)gyro\_raw.z\ /\ \mbox{\hyperlink{driver__ins_8h_a457f7161504ee5da1756fd90856d8e06}{GYRO\_RANGE\_1000DPS\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a212460e743fecb084d717bb2180c5a56}{DEG\_TO\_RAD}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00250}00250\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00251}00251\ \ \ \ \ data-\/>\mbox{\hyperlink{structbmi088__data__t_a7151fee88ade6cc487805f36f80cf619}{timestamp\_ms}}\ =\ HAL\_GetTick();}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00252}00252\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00253}00253\ \ \ \ \ \textcolor{keywordflow}{return}\ BMI08\_OK;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00254}00254\ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00255}00255\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00261}\mbox{\hyperlink{driver__ins_8h_a23d3031c0e8acf3c68721d65f86eb9df}{00261}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{driver__ins_8c_a23d3031c0e8acf3c68721d65f86eb9df}{BMI088\_Convert\_Accel}}(\textcolor{keyword}{struct}\ bmi08\_sensor\_data\ *accel\_raw,\ \textcolor{keywordtype}{float}\ *accel\_mms2)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00262}00262\ \ \ \ \ \textcolor{keywordflow}{if}(accel\_raw\ ==\ NULL\ ||\ accel\_mms2\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00263}00263\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00264}00264\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00265}00265\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00266}00266\ \ \ \ \ accel\_mms2[0]\ =\ ((float)accel\_raw-\/>x\ /\ \mbox{\hyperlink{driver__ins_8h_a9380dda0a2ba4ec70058646c702ac9c4}{ACCEL\_RANGE\_6G\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a9e9c36ec5664be87c119e643c6588e3d}{G\_TO\_MM\_S2}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00267}00267\ \ \ \ \ accel\_mms2[1]\ =\ ((float)accel\_raw-\/>y\ /\ \mbox{\hyperlink{driver__ins_8h_a9380dda0a2ba4ec70058646c702ac9c4}{ACCEL\_RANGE\_6G\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a9e9c36ec5664be87c119e643c6588e3d}{G\_TO\_MM\_S2}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00268}00268\ \ \ \ \ accel\_mms2[2]\ =\ ((float)accel\_raw-\/>z\ /\ \mbox{\hyperlink{driver__ins_8h_a9380dda0a2ba4ec70058646c702ac9c4}{ACCEL\_RANGE\_6G\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a9e9c36ec5664be87c119e643c6588e3d}{G\_TO\_MM\_S2}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00269}00269\ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00270}00270\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00276}\mbox{\hyperlink{driver__ins_8h_a83e3b80cf9b6d79fbb15a252861a98e2}{00276}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{driver__ins_8c_a83e3b80cf9b6d79fbb15a252861a98e2}{BMI088\_Convert\_Gyro}}(\textcolor{keyword}{struct}\ bmi08\_sensor\_data\ *gyro\_raw,\ \textcolor{keywordtype}{float}\ *gyro\_rads)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00277}00277\ \ \ \ \ \textcolor{keywordflow}{if}(gyro\_raw\ ==\ NULL\ ||\ gyro\_rads\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00278}00278\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00279}00279\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00280}00280\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00281}00281\ \ \ \ \ gyro\_rads[0]\ =\ ((float)gyro\_raw-\/>x\ /\ \mbox{\hyperlink{driver__ins_8h_a457f7161504ee5da1756fd90856d8e06}{GYRO\_RANGE\_1000DPS\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a212460e743fecb084d717bb2180c5a56}{DEG\_TO\_RAD}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00282}00282\ \ \ \ \ gyro\_rads[1]\ =\ ((float)gyro\_raw-\/>y\ /\ \mbox{\hyperlink{driver__ins_8h_a457f7161504ee5da1756fd90856d8e06}{GYRO\_RANGE\_1000DPS\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a212460e743fecb084d717bb2180c5a56}{DEG\_TO\_RAD}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00283}00283\ \ \ \ \ gyro\_rads[2]\ =\ ((float)gyro\_raw-\/>z\ /\ \mbox{\hyperlink{driver__ins_8h_a457f7161504ee5da1756fd90856d8e06}{GYRO\_RANGE\_1000DPS\_LSB}})\ *\ \mbox{\hyperlink{driver__ins_8h_a212460e743fecb084d717bb2180c5a56}{DEG\_TO\_RAD}};}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00284}00284\ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00285}00285\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00291}\mbox{\hyperlink{driver__ins_8h_a59de7989bc26e2f9bf0e19fe71c354c8}{00291}}\ uint8\_t\ \mbox{\hyperlink{driver__ins_8c_a59de7989bc26e2f9bf0e19fe71c354c8}{BMI088\_Test\_Communication}}(uint8\_t\ print\_result)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00292}00292\ \ \ \ \ uint8\_t\ accel\_ok\ =\ (bmi088\_dev.accel\_chip\_id\ ==\ BMI088\_ACCEL\_CHIP\_ID);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00293}00293\ \ \ \ \ uint8\_t\ gyro\_ok\ =\ (bmi088\_dev.gyro\_chip\_id\ ==\ BMI08\_GYRO\_CHIP\_ID);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00294}00294\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00295}00295\ \ \ \ \ \textcolor{keywordflow}{if}(print\_result)\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00296}00296\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00297}00297\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00298}00298\ \textcolor{comment}{\ \ \ \ \ \ \ \ printf("{}===\ BMI088\ Communication\ Test\ ===\(\backslash\)r\(\backslash\)n"{});}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00299}00299\ \textcolor{comment}{\ \ \ \ \ \ \ \ printf("{}Accelerometer:\ \%s\ (ID:\ 0x\%02X)\(\backslash\)r\(\backslash\)n"{},}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00300}00300\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ accel\_ok\ ?\ "{}OK"{}\ :\ "{}FAIL"{},\ bmi088\_dev.accel\_chip\_id);}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00301}00301\ \textcolor{comment}{\ \ \ \ \ \ \ \ printf("{}Gyroscope:\ \%s\ (ID:\ 0x\%02X)\(\backslash\)r\(\backslash\)n"{},}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00302}00302\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ gyro\_ok\ ?\ "{}OK"{}\ :\ "{}FAIL"{},\ bmi088\_dev.gyro\_chip\_id);}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00303}00303\ \textcolor{comment}{\ \ \ \ \ \ \ \ printf("{}================================\(\backslash\)r\(\backslash\)n"{});}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00304}00304\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00305}00305\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00306}00306\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00307}00307\ \ \ \ \ \textcolor{keywordflow}{return}\ (accel\_ok\ \&\&\ gyro\_ok);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00308}00308\ \}}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00309}00309\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00314}\mbox{\hyperlink{driver__ins_8h_aaf0bd4d8e01873f5d13c5812b64dc904}{00314}}\ int8\_t\ \mbox{\hyperlink{driver__ins_8c_aaf0bd4d8e01873f5d13c5812b64dc904}{BMI088\_Soft\_Reset}}(\textcolor{keywordtype}{void})\{}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00315}00315\ \ \ \ \ uint8\_t\ soft\_reset\_cmd\ =\ BMI08\_SOFT\_RESET\_CMD;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00316}00316\ \ \ \ \ int8\_t\ rslt\ =\ bmi088\_spi\_write(BMI08\_REG\_ACCEL\_SOFTRESET,\ \&soft\_reset\_cmd,\ 1,\ \&cs\_accel);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00317}00317\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00318}00318\ \ \ \ \ HAL\_Delay(50);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00319}00319\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00320}00320\ \ \ \ \ rslt\ |=\ bmi088\_spi\_write(BMI08\_REG\_GYRO\_SOFTRESET,\ \&soft\_reset\_cmd,\ 1,\ \&cs\_gyro);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00321}00321\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00322}00322\ \ \ \ \ HAL\_Delay(50);}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00323}00323\ }
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00324}00324\ \ \ \ \ \textcolor{keywordflow}{return}\ rslt;}
\DoxyCodeLine{\Hypertarget{driver__ins_8c_source_l00325}00325\ \}}

\end{DoxyCode}
