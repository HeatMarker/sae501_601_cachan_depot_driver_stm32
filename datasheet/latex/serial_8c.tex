\doxysection{Core/\+Src/serial.c File Reference}
\hypertarget{serial_8c}{}\label{serial_8c}\index{Core/Src/serial.c@{Core/Src/serial.c}}


Gestionnaire de communication Série (UART) avec DMA et Buffers Circulaires.  


{\ttfamily \#include "{}serial.\+h"{}}\newline
{\ttfamily \#include "{}usart.\+h"{}}\newline
{\ttfamily \#include "{}dma.\+h"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
Include dependency graph for serial.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{serial_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{serial_8c_a87655e5b91496d3afaa11764ccc9bf76}{RING\+\_\+\+MASK}}~(\mbox{\hyperlink{serial_8h_a95d8cad1efb1bbcaa30d35c6b5244954}{SERIAL\+\_\+\+RX\+\_\+\+RING\+\_\+\+SIZE}}-\/1u)
\begin{DoxyCompactList}\small\item\em Masque pour le calcul modulo du buffer RX (taille doit être puissance de 2). \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{serial_8c_a530086d082c22e371518c2497c6d9014}{TX\+\_\+\+RING\+\_\+\+SIZE}}~1024u
\begin{DoxyCompactList}\small\item\em Taille du buffer circulaire d\textquotesingle{}émission. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{serial_8c_a87033b2cb9cac2320456144d97b38e26}{TX\+\_\+\+RING\+\_\+\+MASK}}~(\mbox{\hyperlink{serial_8c_a530086d082c22e371518c2497c6d9014}{TX\+\_\+\+RING\+\_\+\+SIZE}}-\/1u)
\begin{DoxyCompactList}\small\item\em Masque pour le calcul modulo du buffer TX. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{serial_8c_ad2b461e9e9044364a28a61cfadcacdd8}{serial\+\_\+init}} (void)
\begin{DoxyCompactList}\small\item\em Initialise le driver Série. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{serial_8c_a486d407cc691fdca20f4df1df56146dc}{serial\+\_\+write\+\_\+nb}} (const uint8\+\_\+t \texorpdfstring{$\ast$}{*}data, uint16\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Écrit des données dans le buffer d\textquotesingle{}émission (Non-\/bloquant partiel). \end{DoxyCompactList}\item 
int \mbox{\hyperlink{serial_8c_a12e004eaf083ce1dc139435138ab95f0}{serial\+\_\+write\+\_\+all\+\_\+nb}} (const uint8\+\_\+t \texorpdfstring{$\ast$}{*}data, uint16\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Écrit des données seulement si tout le bloc peut entrer (Atomique). \end{DoxyCompactList}\item 
int \mbox{\hyperlink{serial_8c_a0462052cfbd13717bb95c3ec2b8c56c8}{serial\+\_\+write}} (const uint8\+\_\+t \texorpdfstring{$\ast$}{*}data, uint16\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Wrapper bloquant pour l\textquotesingle{}écriture (simulé). \end{DoxyCompactList}\item 
int \mbox{\hyperlink{serial_8c_aa025a12d45f60c7d0eae249e61f0c7f9}{\+\_\+write}} (int file, char \texorpdfstring{$\ast$}{*}ptr, int len)
\begin{DoxyCompactList}\small\item\em Fonction système bas niveau pour rediriger printf(). \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{serial_8c_a2e36acadca0241c32e6182ee7fac4aab}{serial\+\_\+available}} (void)
\begin{DoxyCompactList}\small\item\em Vérifie le nombre d\textquotesingle{}octets disponibles à la lecture. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{serial_8c_af1ffd0c746c8635c6db4fd0c9efb6090}{serial\+\_\+read}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}dst, size\+\_\+t max\+\_\+len)
\begin{DoxyCompactList}\small\item\em Lit des données depuis le buffer RX. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{serial_8c_a01759c2c56f8eba6d1480739226c91aa}{serial\+\_\+read\+\_\+until}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}dst, size\+\_\+t max\+\_\+len, uint8\+\_\+t delim)
\begin{DoxyCompactList}\small\item\em Lit des données jusqu\textquotesingle{}à rencontrer un délimiteur. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{serial_8c_abcdf9b59049eccbc87d54042f9235b1a}{HAL\+\_\+\+UART\+\_\+\+Tx\+Cplt\+Callback}} (UART\+\_\+\+Handle\+Type\+Def \texorpdfstring{$\ast$}{*}huart)
\begin{DoxyCompactList}\small\item\em Callback HAL appelé quand un transfert DMA TX est terminé. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{serial_8c_a925534fb8bf7ca464fd05c982fe4bfa0}{HAL\+\_\+\+UARTEx\+\_\+\+Rx\+Event\+Callback}} (UART\+\_\+\+Handle\+Type\+Def \texorpdfstring{$\ast$}{*}huart, uint16\+\_\+t Size)
\begin{DoxyCompactList}\small\item\em Callback HAL appelé lors d\textquotesingle{}un événement RX (Idle Line ou Transfer Complete). \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{serial_8c_a8727fa15c9fb77f93792e9659dd05e82}{serial\+\_\+crc8\+\_\+atm}} (const uint8\+\_\+t \texorpdfstring{$\ast$}{*}data, uint16\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Calcule un CRC-\/8 (Polynôme ATM \+: 0x07). \end{DoxyCompactList}\item 
int \mbox{\hyperlink{serial_8c_ab96bed5d897c99c731213ef12c92de4a}{proto\+\_\+send\+\_\+write16}} (uint8\+\_\+t addr, int16\+\_\+t value)
\begin{DoxyCompactList}\small\item\em Envoie une commande d\textquotesingle{}écriture 16 bits protocole. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{serial_8c_a8bc50b8f059209fdf02b1e19624e76d2}{proto\+\_\+send\+\_\+read\+\_\+burst}} (uint8\+\_\+t addr, uint8\+\_\+t count, uint8\+\_\+t flags)
\begin{DoxyCompactList}\small\item\em Envoie une demande de lecture multiple (Burst). \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Gestionnaire de communication Série (UART) avec DMA et Buffers Circulaires. 

Ce fichier implémente un driver UART haute performance asynchrone.
\begin{DoxyItemize}
\item Réception \+: Utilise un buffer DMA linéaire couplé à un buffer circulaire logiciel.
\item Transmission \+: Utilise un buffer circulaire logiciel vidé par DMA.
\item Supporte les fonctions standard stdio (\+\_\+write) pour printf. 
\end{DoxyItemize}

Definition in file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.



\doxysubsection{Macro Definition Documentation}
\Hypertarget{serial_8c_a87655e5b91496d3afaa11764ccc9bf76}\label{serial_8c_a87655e5b91496d3afaa11764ccc9bf76} 
\index{serial.c@{serial.c}!RING\_MASK@{RING\_MASK}}
\index{RING\_MASK@{RING\_MASK}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{RING\_MASK}{RING\_MASK}}
{\footnotesize\ttfamily \#define RING\+\_\+\+MASK~(\mbox{\hyperlink{serial_8h_a95d8cad1efb1bbcaa30d35c6b5244954}{SERIAL\+\_\+\+RX\+\_\+\+RING\+\_\+\+SIZE}}-\/1u)}



Masque pour le calcul modulo du buffer RX (taille doit être puissance de 2). 



Definition at line \mbox{\hyperlink{serial_8c_source_l00030}{30}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

\Hypertarget{serial_8c_a87033b2cb9cac2320456144d97b38e26}\label{serial_8c_a87033b2cb9cac2320456144d97b38e26} 
\index{serial.c@{serial.c}!TX\_RING\_MASK@{TX\_RING\_MASK}}
\index{TX\_RING\_MASK@{TX\_RING\_MASK}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{TX\_RING\_MASK}{TX\_RING\_MASK}}
{\footnotesize\ttfamily \#define TX\+\_\+\+RING\+\_\+\+MASK~(\mbox{\hyperlink{serial_8c_a530086d082c22e371518c2497c6d9014}{TX\+\_\+\+RING\+\_\+\+SIZE}}-\/1u)}



Masque pour le calcul modulo du buffer TX. 



Definition at line \mbox{\hyperlink{serial_8c_source_l00057}{57}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

\Hypertarget{serial_8c_a530086d082c22e371518c2497c6d9014}\label{serial_8c_a530086d082c22e371518c2497c6d9014} 
\index{serial.c@{serial.c}!TX\_RING\_SIZE@{TX\_RING\_SIZE}}
\index{TX\_RING\_SIZE@{TX\_RING\_SIZE}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{TX\_RING\_SIZE}{TX\_RING\_SIZE}}
{\footnotesize\ttfamily \#define TX\+\_\+\+RING\+\_\+\+SIZE~1024u}



Taille du buffer circulaire d\textquotesingle{}émission. 



Definition at line \mbox{\hyperlink{serial_8c_source_l00054}{54}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.



\doxysubsection{Function Documentation}
\Hypertarget{serial_8c_aa025a12d45f60c7d0eae249e61f0c7f9}\label{serial_8c_aa025a12d45f60c7d0eae249e61f0c7f9} 
\index{serial.c@{serial.c}!\_write@{\_write}}
\index{\_write@{\_write}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{\_write()}{\_write()}}
{\footnotesize\ttfamily int \+\_\+write (\begin{DoxyParamCaption}\item[{int}]{file,  }\item[{char \texorpdfstring{$\ast$}{*}}]{ptr,  }\item[{int}]{len }\end{DoxyParamCaption})}



Fonction système bas niveau pour rediriger printf(). 


\begin{DoxyParams}{Parameters}
{\em file} & Descripteur de fichier (ignoré). \\
\hline
{\em ptr} & Données à écrire. \\
\hline
{\em len} & Longueur. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nombre d\textquotesingle{}octets écrits ou -\/1. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{serial_8c_source_l00194}{194}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=256pt]{serial_8c_aa025a12d45f60c7d0eae249e61f0c7f9_cgraph}
\end{center}
\end{figure}
\Hypertarget{serial_8c_abcdf9b59049eccbc87d54042f9235b1a}\label{serial_8c_abcdf9b59049eccbc87d54042f9235b1a} 
\index{serial.c@{serial.c}!HAL\_UART\_TxCpltCallback@{HAL\_UART\_TxCpltCallback}}
\index{HAL\_UART\_TxCpltCallback@{HAL\_UART\_TxCpltCallback}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{HAL\_UART\_TxCpltCallback()}{HAL\_UART\_TxCpltCallback()}}
{\footnotesize\ttfamily void HAL\+\_\+\+UART\+\_\+\+Tx\+Cplt\+Callback (\begin{DoxyParamCaption}\item[{UART\+\_\+\+Handle\+Type\+Def \texorpdfstring{$\ast$}{*}}]{huart }\end{DoxyParamCaption})}



Callback HAL appelé quand un transfert DMA TX est terminé. 

Met à jour l\textquotesingle{}index de queue TX et relance une transmission si il reste des données dans le buffer. 
\begin{DoxyParams}{Parameters}
{\em huart} & Handle UART concerné. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{serial_8c_source_l00277}{277}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

\Hypertarget{serial_8c_a925534fb8bf7ca464fd05c982fe4bfa0}\label{serial_8c_a925534fb8bf7ca464fd05c982fe4bfa0} 
\index{serial.c@{serial.c}!HAL\_UARTEx\_RxEventCallback@{HAL\_UARTEx\_RxEventCallback}}
\index{HAL\_UARTEx\_RxEventCallback@{HAL\_UARTEx\_RxEventCallback}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{HAL\_UARTEx\_RxEventCallback()}{HAL\_UARTEx\_RxEventCallback()}}
{\footnotesize\ttfamily void HAL\+\_\+\+UARTEx\+\_\+\+Rx\+Event\+Callback (\begin{DoxyParamCaption}\item[{UART\+\_\+\+Handle\+Type\+Def \texorpdfstring{$\ast$}{*}}]{huart,  }\item[{uint16\+\_\+t}]{Size }\end{DoxyParamCaption})}



Callback HAL appelé lors d\textquotesingle{}un événement RX (Idle Line ou Transfer Complete). 

Transfère les données du buffer DMA linéaire (rx\+\_\+chunk) vers le buffer circulaire logiciel (rx\+\_\+ring). \begin{DoxyNote}{Note}
Gère la position précédente pour ne copier que les nouveaux octets reçus. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em huart} & Handle UART concerné. \\
\hline
{\em Size} & Nombre total d\textquotesingle{}octets reçus dans le buffer DMA. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{serial_8c_source_l00293}{293}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

\Hypertarget{serial_8c_a8bc50b8f059209fdf02b1e19624e76d2}\label{serial_8c_a8bc50b8f059209fdf02b1e19624e76d2} 
\index{serial.c@{serial.c}!proto\_send\_read\_burst@{proto\_send\_read\_burst}}
\index{proto\_send\_read\_burst@{proto\_send\_read\_burst}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{proto\_send\_read\_burst()}{proto\_send\_read\_burst()}}
{\footnotesize\ttfamily int proto\+\_\+send\+\_\+read\+\_\+burst (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{addr,  }\item[{uint8\+\_\+t}]{count,  }\item[{uint8\+\_\+t}]{flags }\end{DoxyParamCaption})}



Envoie une demande de lecture multiple (Burst). 

Envoie une requête de lecture (Frame Read Request).


\begin{DoxyParams}{Parameters}
{\em addr} & Adresse de départ. \\
\hline
{\em count} & Nombre de registres à lire. \\
\hline
{\em flags} & Flags optionnels. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Résultat de l\textquotesingle{}envoi. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{serial_8c_source_l00372}{372}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

\Hypertarget{serial_8c_ab96bed5d897c99c731213ef12c92de4a}\label{serial_8c_ab96bed5d897c99c731213ef12c92de4a} 
\index{serial.c@{serial.c}!proto\_send\_write16@{proto\_send\_write16}}
\index{proto\_send\_write16@{proto\_send\_write16}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{proto\_send\_write16()}{proto\_send\_write16()}}
{\footnotesize\ttfamily int proto\+\_\+send\+\_\+write16 (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{addr,  }\item[{int16\+\_\+t}]{value }\end{DoxyParamCaption})}



Envoie une commande d\textquotesingle{}écriture 16 bits protocole. 

Envoie une commande d\textquotesingle{}écriture 16 bits (Frame Write).


\begin{DoxyParams}{Parameters}
{\em addr} & Adresse du registre virtuel. \\
\hline
{\em value} & Valeur 16 bits à écrire. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Résultat de l\textquotesingle{}envoi. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{serial_8c_source_l00359}{359}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

\Hypertarget{serial_8c_a2e36acadca0241c32e6182ee7fac4aab}\label{serial_8c_a2e36acadca0241c32e6182ee7fac4aab} 
\index{serial.c@{serial.c}!serial\_available@{serial\_available}}
\index{serial\_available@{serial\_available}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{serial\_available()}{serial\_available()}}
{\footnotesize\ttfamily size\+\_\+t serial\+\_\+available (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Vérifie le nombre d\textquotesingle{}octets disponibles à la lecture. 

Retourne le nombre d\textquotesingle{}octets disponibles dans le buffer RX.

\begin{DoxyReturn}{Returns}
Nombre d\textquotesingle{}octets dans le buffer RX. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{serial_8c_source_l00204}{204}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

\Hypertarget{serial_8c_a8727fa15c9fb77f93792e9659dd05e82}\label{serial_8c_a8727fa15c9fb77f93792e9659dd05e82} 
\index{serial.c@{serial.c}!serial\_crc8\_atm@{serial\_crc8\_atm}}
\index{serial\_crc8\_atm@{serial\_crc8\_atm}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{serial\_crc8\_atm()}{serial\_crc8\_atm()}}
{\footnotesize\ttfamily uint8\+\_\+t serial\+\_\+crc8\+\_\+atm (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{data,  }\item[{uint16\+\_\+t}]{len }\end{DoxyParamCaption})}



Calcule un CRC-\/8 (Polynôme ATM \+: 0x07). 

Calcule le CRC8 (Polynôme ATM 0x07).


\begin{DoxyParams}{Parameters}
{\em data} & Pointeur vers les données. \\
\hline
{\em len} & Longueur des données. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Valeur du CRC calculé. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{serial_8c_source_l00326}{326}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{serial_8c_a8727fa15c9fb77f93792e9659dd05e82_icgraph}
\end{center}
\end{figure}
\Hypertarget{serial_8c_ad2b461e9e9044364a28a61cfadcacdd8}\label{serial_8c_ad2b461e9e9044364a28a61cfadcacdd8} 
\index{serial.c@{serial.c}!serial\_init@{serial\_init}}
\index{serial\_init@{serial\_init}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{serial\_init()}{serial\_init()}}
{\footnotesize\ttfamily void serial\+\_\+init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Initialise le driver Série. 

Initialise la couche série (DMA + Buffers).

Lance la réception DMA en mode "{}\+Receive\+To\+Idle"{} pour détecter les fins de trames sans attendre que le buffer soit plein. 

Definition at line \mbox{\hyperlink{serial_8c_source_l00122}{122}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=312pt]{serial_8c_ad2b461e9e9044364a28a61cfadcacdd8_icgraph}
\end{center}
\end{figure}
\Hypertarget{serial_8c_af1ffd0c746c8635c6db4fd0c9efb6090}\label{serial_8c_af1ffd0c746c8635c6db4fd0c9efb6090} 
\index{serial.c@{serial.c}!serial\_read@{serial\_read}}
\index{serial\_read@{serial\_read}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{serial\_read()}{serial\_read()}}
{\footnotesize\ttfamily size\+\_\+t serial\+\_\+read (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{dst,  }\item[{size\+\_\+t}]{max\+\_\+len }\end{DoxyParamCaption})}



Lit des données depuis le buffer RX. 

Copie les données du buffer circulaire interne vers le buffer utilisateur. Gère le cas où les données sont à cheval sur la fin du buffer (wrap). 
\begin{DoxyParams}{Parameters}
{\em dst} & Buffer de destination. \\
\hline
{\em max\+\_\+len} & Nombre maximum d\textquotesingle{}octets à lire. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nombre d\textquotesingle{}octets réellement lus. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{serial_8c_source_l00214}{214}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{serial_8c_af1ffd0c746c8635c6db4fd0c9efb6090_icgraph}
\end{center}
\end{figure}
\Hypertarget{serial_8c_a01759c2c56f8eba6d1480739226c91aa}\label{serial_8c_a01759c2c56f8eba6d1480739226c91aa} 
\index{serial.c@{serial.c}!serial\_read\_until@{serial\_read\_until}}
\index{serial\_read\_until@{serial\_read\_until}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{serial\_read\_until()}{serial\_read\_until()}}
{\footnotesize\ttfamily size\+\_\+t serial\+\_\+read\+\_\+until (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{dst,  }\item[{size\+\_\+t}]{max\+\_\+len,  }\item[{uint8\+\_\+t}]{delim }\end{DoxyParamCaption})}



Lit des données jusqu\textquotesingle{}à rencontrer un délimiteur. 

Lit des données jusqu\textquotesingle{}à un délimiteur spécifique.

\begin{DoxyNote}{Note}
Fonction utile pour lire des lignes complètes (ex\+: jusqu\textquotesingle{}à \textquotesingle{}\textbackslash{}n\textquotesingle{}). 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em dst} & Buffer de destination. \\
\hline
{\em max\+\_\+len} & Taille max du buffer destination. \\
\hline
{\em delim} & Caractère délimiteur recherché. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nombre d\textquotesingle{}octets lus (incluant le délimiteur), ou 0 si non trouvé. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{serial_8c_source_l00250}{250}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

\Hypertarget{serial_8c_a0462052cfbd13717bb95c3ec2b8c56c8}\label{serial_8c_a0462052cfbd13717bb95c3ec2b8c56c8} 
\index{serial.c@{serial.c}!serial\_write@{serial\_write}}
\index{serial\_write@{serial\_write}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{serial\_write()}{serial\_write()}}
{\footnotesize\ttfamily int serial\+\_\+write (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{data,  }\item[{uint16\+\_\+t}]{len }\end{DoxyParamCaption})}



Wrapper bloquant pour l\textquotesingle{}écriture (simulé). 

Écriture bloquante (Wrapper).

\begin{DoxyNote}{Note}
En réalité non-\/bloquant ici, renvoie -\/1 en cas d\textquotesingle{}échec. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em data} & Pointeur vers les données. \\
\hline
{\em len} & Longueur. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 si succès, -\/1 si erreur. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{serial_8c_source_l00182}{182}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=279pt]{serial_8c_a0462052cfbd13717bb95c3ec2b8c56c8_cgraph}
\end{center}
\end{figure}
\Hypertarget{serial_8c_a12e004eaf083ce1dc139435138ab95f0}\label{serial_8c_a12e004eaf083ce1dc139435138ab95f0} 
\index{serial.c@{serial.c}!serial\_write\_all\_nb@{serial\_write\_all\_nb}}
\index{serial\_write\_all\_nb@{serial\_write\_all\_nb}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{serial\_write\_all\_nb()}{serial\_write\_all\_nb()}}
{\footnotesize\ttfamily int serial\+\_\+write\+\_\+all\+\_\+nb (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{data,  }\item[{uint16\+\_\+t}]{len }\end{DoxyParamCaption})}



Écrit des données seulement si tout le bloc peut entrer (Atomique). 

Écriture non-\/bloquante atomique (Tout ou rien).


\begin{DoxyParams}{Parameters}
{\em data} & Pointeur vers les données. \\
\hline
{\em len} & Nombre d\textquotesingle{}octets. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
len si succès, -\/EWOULDBLOCK si pas assez d\textquotesingle{}espace. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{serial_8c_source_l00159}{159}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=333pt]{serial_8c_a12e004eaf083ce1dc139435138ab95f0_icgraph}
\end{center}
\end{figure}
\Hypertarget{serial_8c_a486d407cc691fdca20f4df1df56146dc}\label{serial_8c_a486d407cc691fdca20f4df1df56146dc} 
\index{serial.c@{serial.c}!serial\_write\_nb@{serial\_write\_nb}}
\index{serial\_write\_nb@{serial\_write\_nb}!serial.c@{serial.c}}
\doxysubsubsection{\texorpdfstring{serial\_write\_nb()}{serial\_write\_nb()}}
{\footnotesize\ttfamily int serial\+\_\+write\+\_\+nb (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{data,  }\item[{uint16\+\_\+t}]{len }\end{DoxyParamCaption})}



Écrit des données dans le buffer d\textquotesingle{}émission (Non-\/bloquant partiel). 

Écriture non-\/bloquante partielle.

\begin{DoxyNote}{Note}
Copie autant de données que possible. S\textquotesingle{}arrête si le buffer est plein. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em data} & Pointeur vers les données. \\
\hline
{\em len} & Nombre d\textquotesingle{}octets à écrire. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nombre d\textquotesingle{}octets réellement écrits ou code d\textquotesingle{}erreur négatif. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{serial_8c_source_l00134}{134}} of file \mbox{\hyperlink{serial_8c_source}{serial.\+c}}.

